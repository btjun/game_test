window.__require=function t(e,o,n){function r(u,a){if(!o[u]){if(!e[u]){var c=u.split("/");if(c=c[c.length-1],!e[c]){var s="function"==typeof __require&&__require;if(!a&&s)return s(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+u+"'")}}var p=o[u]={exports:{}};e[u][0].call(p.exports,function(t){return r(e[u][1][t]||t)},p,p.exports,t,e,o,n)}return o[u].exports}for(var i="function"==typeof __require&&__require,u=0;u<n.length;u++)r(n[u]);return r}({Context:[function(t,e,o){"use strict";cc._RF.push(e,"b1542AaFHtATbQ3Wzvcp2IP","Context");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,u=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(u=(i<3?r(u):i>3?r(e,o,u):r(e,o))||u);return i>3&&u&&Object.defineProperty(e,o,u),u};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,u=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e.numberLayout=null,e}return n(e,t),e.prototype.start=function(){},r([a(cc.Label)],e.prototype,"label",void 0),r([a],e.prototype,"text",void 0),r([a(cc.Layout)],e.prototype,"numberLayout",void 0),e=r([u],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],GameUI:[function(t,e,o){"use strict";cc._RF.push(e,"44801nNwElNsqLkVrrJaEhe","GameUI");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,u=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(u=(i<3?r(u):i>3?r(e,o,u):r(e,o))||u);return i>3&&u&&Object.defineProperty(e,o,u),u};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,u=i.ccclass,a=i.property,c=t("./PrefabScripts/NumPrefab"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score=null,e.numberLayout=null,e.buttonPre=null,e.buttonLayout=null,e.gameover=null,e.numPre=null,e.numberTargets=[],e.numberPool=null,e.buttons=null,e.point=0,e.genNumTimeGap=0,e.stop=!1,e}return n(e,t),e.prototype.reset=function(){var t=this;cc.log("reset() called"),this.stop=!1,this.point=0,this.genNumTimeGap=0,this.gameover.active=!1,null!=this.buttons?this.updateButtonText(this.buttons):this.addButtons(),this.numberTargets.forEach(function(e){e.removeFromParent(!1),t.numberPool.put(e)}),this.numberTargets=[],this.score.string="\u5f97\u5206: 0"},e.prototype.newButton=function(t){var e=this.buttonLayout.width/3,o=this.buttonLayout.height/3,n=cc.instantiate(this.buttonPre);return n.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=t,n.height=o,n.width=e,n.on(cc.Node.EventType.TOUCH_START,this.buttonListener(n)),this.buttonLayout.addChild(n),cc.log("New button added:",t),n},e.prototype.buttonListener=function(t){var e=this;return function(o){if(0!=e.numberTargets.length){var n=e.numberTargets[0].getComponent(c.default).value.toString();t.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string==n?e.addPoint():(cc.log("Game Over"),e.failed(e)())}}},e.prototype.addPoint=function(){var t=this.numberTargets.shift();t.getComponent(c.default).explode(),t.removeFromParent(!1),this.numberPool.put(t),this.point+=1,this.score.string="\u5f97\u5206: ".concat(this.point.toString())},e.prototype.addButtons=function(){var t=this;this.buttons=[];for(var e=["1","2","3","4","5","6","7","8","9"],o=0;o<9;o++){var n=Math.floor(Math.abs(10*Math.random()-1)),r=e[o];e[o]=e[n],e[n]=r}e.forEach(function(e){t.buttons.push(t.newButton(e))}),this.buttonLayout.on(cc.Node.EventType.SIZE_CHANGED,function(e){var o=t.buttonLayout.width/3,n=t.buttonLayout.height/3;t.buttons.forEach(function(t){t.height=n,t.width=o}),cc.log("sizechange")})},e.prototype.updateButtonText=function(t){for(var e=["1","2","3","4","5","6","7","8","9"],o=0;o<9;o++){for(var n=Math.floor(10*Math.random());n>8;)n=Math.floor(10*Math.random());var r=e[o];e[o]=e[n],e[n]=r}for(var i=0;i<9;i++)t[i].getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=e[i];return t},e.prototype.failed=function(t){var e=t;return function(){cc.log("failed() called"),e.stop=!0,e.gameover.active=!0,e.gameover.getChildByName("score").getComponent(cc.Label).string=e.score.string,e.numberTargets.forEach(function(t){t.getComponent(c.default).stop=!0})}},e.prototype.genNumbers=function(t){this.stop||(this.genNumTimeGap+=t,this.genNumTimeGap>1&&(this.genNumber(),this.genNumTimeGap=0))},e.prototype.genNumber=function(){var t=this.numberPool.get();null==t&&(t=cc.instantiate(this.numPre)).getComponent(c.default).addFailListener(this.failed(this)),this.numberTargets.push(t),this.numberLayout.addChild(t)},e.prototype.onLoad=function(){var t=this;this.numberPool=new cc.NodePool(c.default),this.gameover.getChildByName("restart").on(cc.Node.EventType.TOUCH_START,function(e){t.reset()})},e.prototype.start=function(){this.reset()},e.prototype.update=function(t){this.genNumbers(t)},r([a(cc.Label)],e.prototype,"score",void 0),r([a(cc.Node)],e.prototype,"numberLayout",void 0),r([a(cc.Prefab)],e.prototype,"buttonPre",void 0),r([a(cc.Node)],e.prototype,"buttonLayout",void 0),r([a(cc.Node)],e.prototype,"gameover",void 0),r([a(cc.Prefab)],e.prototype,"numPre",void 0),e=r([u],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./PrefabScripts/NumPrefab":"NumPrefab"}],NumPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"727bc4raGpCV6sMJ8fvCRD/","NumPrefab");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,u=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(u=(i<3?r(u):i>3?r(e,o,u):r(e,o))||u);return i>3&&u&&Object.defineProperty(e,o,u),u};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,u=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numLabel=null,e.accelerate=.3,e._speed=2,e.value=0,e.stop=!1,e.initX=0,e.initY=0,e}return n(e,t),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t},enumerable:!0,configurable:!0}),e.prototype.updateValue=function(){this.stop=!1,this.enabled=!0,this.node.y=this.initY,this.node.x=this.initX*Math.random();do{this.value=Math.floor(10*Math.random())}while(0==this.value);this.numLabel.string=this.value.toString(),cc.log("update node at x, y",this.node.x,",",this.node.y)},e.prototype.explode=function(){this.enabled=!1,this.stop=!0},e.prototype.failed=function(){this.stop=!0,this.onFailed()},e.prototype.move=function(t){this.stop||(this.node.y-=this.speed+this.accelerate*t,this.node.y<0&&this.failed())},e.prototype.onLoad=function(){this.initX=this.node.parent.width,this.initY=this.node.parent.height,this.updateValue()},e.prototype.addFailListener=function(t){this.onFailed=t},e.prototype.start=function(){},e.prototype.reuse=function(){this.updateValue()},e.prototype.unuse=function(){},e.prototype.update=function(t){this.move(t)},r([a(cc.Label)],e.prototype,"numLabel",void 0),r([a],e.prototype,"accelerate",void 0),e=r([u],e)}(cc.Component);o.default=c,cc._RF.pop()},{}]},{},["Context","GameUI","NumPrefab"]);